# AppSync Events Sample

This sample shows how to create an AWS AppSync Events API and integrate AWS Lambda and Amazon DynamoDB as data sources.

The sample includes two namespaces:

- `foo` - a namespace with Lambda data source
- `bar` - a namespace with DynamoDB data source

The `foo` namespace only logs the event and in case of `onPublish` transforms the messages.

The `bar` namespace stores all the messages from `onPublish` as well as the `onSubscribe` events in a DynamoDB table.

## Deployment

Clone this repository and run the following command to deploy the sample:

```bash
npm ci
npm run cdk deploy
```

And follow the prompts to deploy the stack.

Once deployed, navigate to the AWS AppSync console, select the API, and then select the `Pub/Sub Editor` tab to test sending messages and subscribing to events in both namespaces.

For the `foo` namespace, you should see that the messages received by subscribers are transformed, you can optionally navigate to the Amazon CloudWatch console to see the logs generated by the Lambda function.

For the `bar` namespace, you can navigate to the Amazon DynamoDB console to see the messages stored in the table.

## Cleanup

To delete the stack and all the resources created by this sample, run the following command:

```bash
npm run cdk destroy
```

This will remove all the resources created by the stack, including the AWS AppSync API, Lambda function, and DynamoDB table.

## License

MIT-0
